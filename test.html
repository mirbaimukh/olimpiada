<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ª–∏–º–ø–∏–∞–¥–∞ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ */
        .timer-container {
            background: linear-gradient(135deg, #4fc3f7, #0288d1);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            font-size: 1.1rem;
            margin-left: 15px;
            box-shadow: 0 4px 12px rgba(79, 195, 247, 0.3);
        }
        
        .timer-warning {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            animation: pulse 1s infinite;
        }
        
        .timer-critical {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            animation: pulse 0.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .time-up-message {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            text-align: center;
            padding: 20px;
        }
        
        .time-up-content {
            background: white;
            color: #333;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .time-up-content h2 {
            color: #f44336;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .time-up-content p {
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        .auto-submit-btn {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .auto-submit-btn:hover {
            background: linear-gradient(135deg, #66bb6a, #388e3c);
            transform: translateY(-3px);
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—á–µ–Ω–∏–∫–µ */
        #user-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .class-badge {
            background: #ff9800;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-left: 5px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ */
        .save-notice {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 10px;
            padding: 10px 15px;
            margin: 10px 0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                <div>
                    <h1><i class="fas fa-star"></i> –ë–∞—à“°–æ—Ä—Ç —Ç–µ–ª–µ–Ω”ô–Ω "–¢”ô“Ø–≥–µ–ª”ô—Ä –∞—Ä–∞“ª—ã–Ω–¥–∞ –±–µ—Ä–µ–Ω—Å–µ" –æ–ª–∏–º–ø–∏–∞–¥–∞“ª—ã</h1>
                    <p class="subtitle">3-4 –∫–ª–∞—Å—Ç–∞—Ä“ô–∞ —É“°—ã—É—Å—ã–ª–∞—Ä ”©—Å”©–Ω ‚Ä¢ –¢–∞–º–∞–º–ª–∞—É –≤–∞“°—ã—Ç—ã: 1 —Å”ô“ì”ô—Ç</p>
                </div>
                <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                    <div id="user-info" style="background: #e1f5fe; padding: 10px 20px; border-radius: 50px;">
                        <i class="fas fa-user-graduate"></i>
                        <span id="student-name" style="font-weight: bold; margin-left: 5px;">–£—á–µ–Ω–∏–∫</span>
                        <span id="student-class" class="class-badge"></span>
                    </div>
                    <div id="timer" class="timer-container">
                        <i class="fas fa-clock"></i>
                        <span id="timer-text">01:00:00</span>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <section class="intro">
                <p>–°”ô–ª”ô–º! –ë—ã–ª –±–∞—à“°–æ—Ä—Ç —Ç–µ–ª–µ –±—É–π—ã–Ω—Å–∞ –æ–ª–∏–º–ø–∏–∞–¥–∞. –ë”©—Ç”ô —ç—à—Ç”ô—Ä“ô–µ –±–∞—à“°–∞—Ä—ã—É ”©—Å”©–Ω <strong>1 —Å”ô“ì”ô—Ç (60 –º–∏–Ω—É—Ç)</strong> –≤–∞“°—ã—Ç—ã“ì—ã“ô –±–∞—Ä. “∫–æ—Ä–∞—É“ô—ã –∏“ì—Ç–∏–±–∞—Ä –º–µ–Ω”ô–Ω —É“°—ã“ì—ã“ô “ª”ô–º –±–µ—Ä –¥”©—Ä”©“´ —è—É–∞–ø “ª–∞–π–ª–∞“ì—ã“ô. –£“£—ã—à—Ç–∞—Ä!</p>
                <div id="save-notice" class="save-notice">
                    <i class="fas fa-save"></i>
                    <span>–ë”©—Ç”ô —è—É–∞–ø—Ç–∞—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∫ —Ä”ô“Ø–µ—à—Ç”ô “ª–∞“°–ª–∞–Ω–∞</span>
                </div>
            </section>

            <form id="quiz-form">
                <!-- –í–æ–ø—Ä–æ—Å 1 -->
                <div class="question-card">
                    <h3><span class="q-number">1</span> “ª–æ—Ä–∞—É</h3>
                    <p class="question-text">–£ –ü–∞—à–∏ –±—ã–ª–æ 5 —è–±–ª–æ–∫. 2 —è–±–ª–æ–∫–∞ –æ–Ω–∞ –æ—Ç–¥–∞–ª–∞ –¥—Ä—É–≥—É. –°–∫–æ–ª—å–∫–æ —è–±–ª–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å —É –ü–∞—à–∏?</p>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q1" value="a">
                            <span class="checkmark"></span>
                            <span class="option-text">2 —è–±–ª–æ–∫–∞</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="b">
                            <span class="checkmark"></span>
                            <span class="option-text">3 —è–±–ª–æ–∫–∞</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="c">
                            <span class="checkmark"></span>
                            <span class="option-text">5 —è–±–ª–æ–∫</span>
                        </label>
                    </div>
                </div>

                <!-- –í–æ–ø—Ä–æ—Å 2 -->
                <div class="question-card">
                    <h3><span class="q-number">2</span> “ª–æ—Ä–∞—É</h3>
                    <p class="question-text">–ü—Ä–æ–¥–æ–ª–∂–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2, 4, 6, ...</p>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q2" value="a">
                            <span class="checkmark"></span>
                            <span class="option-text">7</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="b">
                            <span class="checkmark"></span>
                            <span class="option-text">8</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="c">
                            <span class="checkmark"></span>
                            <span class="option-text">10</span>
                        </label>
                    </div>
                </div>

                <!-- –í–æ–ø—Ä–æ—Å 3 -->
                <div class="question-card">
                    <h3><span class="q-number">3</span> “ª–æ—Ä–∞—É</h3>
                    <p class="question-text">–ö–∞–∫–∞—è —Ñ–∏–≥—É—Ä–∞ –Ω–µ –∏–º–µ–µ—Ç —É–≥–ª–æ–≤?</p>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q3" value="a">
                            <span class="checkmark"></span>
                            <span class="option-text">–ö–≤–∞–¥—Ä–∞—Ç</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="b">
                            <span class="checkmark"></span>
                            <span class="option-text">–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="c">
                            <span class="checkmark"></span>
                            <span class="option-text">–ö—Ä—É–≥</span>
                        </label>
                    </div>
                </div>

                <!-- –í–æ–ø—Ä–æ—Å 4 -->
                <div class="question-card">
                    <h3><span class="q-number">4</span> “ª–æ—Ä–∞—É</h3>
                    <p class="question-text">–ö—Ç–æ –∏–∑ —ç—Ç–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –¥–æ–º–∞—à–Ω–∏–π?</p>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q4" value="a">
                            <span class="checkmark"></span>
                            <span class="option-text">–í–æ–ª–∫</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="b">
                            <span class="checkmark"></span>
                            <span class="option-text">–ö–æ—Ä–æ–≤–∞</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="c">
                            <span class="checkmark"></span>
                            <span class="option-text">–ú–µ–¥–≤–µ–¥—å</span>
                        </label>
                    </div>
                </div>

                <!-- –í–æ–ø—Ä–æ—Å 5 -->
                <div class="question-card">
                    <h3><span class="q-number">5</span> “ª–æ—Ä–∞—É</h3>
                    <p class="question-text">–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 7 + 3?</p>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q5" value="a">
                            <span class="checkmark"></span>
                            <span class="option-text">9</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="b">
                            <span class="checkmark"></span>
                            <span class="option-text">10</span>
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="c">
                            <span class="checkmark"></span>
                            <span class="option-text">11</span>
                        </label>
                    </div>
                </div>

                <div class="button-container">
                    <button type="button" id="check-btn" class="btn check-btn">
                        <i class="fas fa-check-circle"></i> –¢–∞–º–∞–º–ª–∞—É “ª”ô–º —Ç–∏–∫—à–µ—Ä–µ“Ø
                    </button>
                    <button type="reset" class="btn reset-btn">
                        <i class="fas fa-redo"></i> –Ø“£—ã–Ω–∞–Ω –±–∞—à–ª–∞—É
                    </button>
                </div>
            </form>

            <!-- –ë–ª–æ–∫ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º -->
            <section id="result" class="result-container" style="display: none;">
                <h2><i class="fas fa-chart-line"></i> –¢–µ—Å—Ç “ª–∞–Ω—ã</h2>
                <div class="score-circle">
                    <span id="score-text">0/5</span>
                </div>
                <p id="result-message" class="result-message"></p>
                <div id="time-result" style="margin: 20px 0; font-size: 1.1rem;"></div>
                <button id="close-result" class="btn close-btn">
                    <i class="fas fa-times"></i> –¢–µ—Å—Ç—Ç—ã —è–±—ã—É
                </button>
            </section>
        </main>

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ -->
        <div id="time-up-message" class="time-up-message">
            <div class="time-up-content">
                <h2><i class="fas fa-clock"></i> –í–∞“õ—ã—Ç —Ç–∞–º–∞–º–ª–∞–Ω–¥—ã!</h2>
                <p>–û–ª–∏–º–ø–∏–∞–¥–∞–Ω—ã “Ø—Ç”ô“Ø ”©—Å”©–Ω –±–∏—Ä–µ–ª–≥”ô–Ω –≤–∞“õ—ã—Ç “Ø—Ç—Ç–µ.</p>
                <p>“∫–∞–π–ª–∞–ø ”©–ª–≥”©—Ä–≥”ô–Ω –±–∞—Ä–ª—ã“° —è—É–∞–ø—Ç–∞—Ä “ô–∞ “ª–∞“°–ª–∞–Ω“ì–∞–Ω..</p>
                <p>–Ø—É–∞–ø –±–∏—Ä–º”ô–≥”ô–Ω “ª–æ—Ä–∞—É“ô–∞—Ä –¥”©—Ä”©“´ —Ç“Ø–≥–µ–ª —Ç–∏–ø –∏“´”ô–ø–ª”ô–Ω”ô—Å”ô–∫.</p>
                <p>“∫”©“ô”©–º—Ç”ô“£ –∞–≤—Ç–æ–º–∞—Ç–∏–∫ —Ä”ô“Ø–µ—à—Ç”ô —É“°—ã—Ç—ã—É—Å—ã“ì–∞ –µ–±”ô—Ä–µ–ª”ô.</p>
                <button id="auto-submit-btn" class="auto-submit-btn">
                    <i class="fas fa-paper-plane"></i> “∫”©“ô”©–º—Ç”ô–Ω–µ –µ–±”ô—Ä–µ“Ø
                </button>
            </div>
        </div>

        <footer>
            <p>–°–∞–π—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —É—á–µ–±–Ω–æ–π –æ–ª–∏–º–ø–∏–∞–¥—ã. ¬© <span id="current-year">2024</span></p>
        </footer>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        const firstName = localStorage.getItem('olympFirstName') || '';
        const lastName = localStorage.getItem('olympLastName') || '';
        const userClass = localStorage.getItem('olympClass') || '';
        
        // –ï—Å–ª–∏ –∏–º—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        if (!firstName && !lastName) {
            document.body.innerHTML = `
                <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
                    <h2 style="color: #f44336;">‚ö†Ô∏è –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞</h2>
                    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—á–Ω–∏—Ç–µ —Å–æ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.</p>
                    <p>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ <span id="countdown">3</span> —Å–µ–∫—É–Ω–¥—ã...</p>
                    <a href="index.html" style="display: inline-block; margin-top: 20px; padding: 10px 20px; background: #4fc3f7; color: white; text-decoration: none; border-radius: 5px;">
                        –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    </a>
                </div>
            `;
            
            let count = 3;
            const countdownEl = document.getElementById('countdown');
            const timer = setInterval(() => {
                count--;
                countdownEl.textContent = count;
                if (count <= 0) {
                    clearInterval(timer);
                    window.location.href = 'index.html';
                }
            }, 1000);
        }

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—á–µ–Ω–∏–∫–µ
        document.getElementById('student-name').textContent = `${firstName} ${lastName}`;
        document.getElementById('student-class').textContent = `${userClass} –∫–ª–∞—Å—ã —É“°—ã—É—Å—ã“ª—ã`;

        // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        const correctAnswers = {
            q1: 'b', // 3 —è–±–ª–æ–∫–∞
            q2: 'b', // 8
            q3: 'c', // –ö—Ä—É–≥
            q4: 'b', // –ö–æ—Ä–æ–≤–∞
            q5: 'b'  // 10
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–π–º–µ—Ä–∞
        let totalTime = 60 * 60; // 1 —á–∞—Å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        let timeLeft = totalTime;
        let startTime = Date.now();
        let timerInterval;
        let isTimeUp = false;

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        function loadSavedAnswers() {
            const savedAnswers = JSON.parse(localStorage.getItem(`olymp_answers_${firstName}_${lastName}_${userClass}`)) || {};
            for (let question in savedAnswers) {
                const radio = document.querySelector(`input[name="${question}"][value="${savedAnswers[question]}"]`);
                if (radio) {
                    radio.checked = true;
                }
            }
            document.getElementById('save-notice').style.display = 'flex';
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
        function saveAnswers() {
            const answers = {};
            const radioInputs = document.querySelectorAll('input[type="radio"]:checked');
            radioInputs.forEach(input => {
                answers[input.name] = input.value;
            });
            localStorage.setItem(`olymp_answers_${firstName}_${lastName}_${userClass}`, JSON.stringify(answers));
        }

        // –¢–∞–π–º–µ—Ä
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                
                document.getElementById('timer-text').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –∫–æ–Ω—Ü—É
                const timerElement = document.getElementById('timer');
                if (timeLeft <= 300) { // 5 –º–∏–Ω—É—Ç
                    timerElement.classList.add('timer-critical');
                    timerElement.classList.remove('timer-warning');
                } else if (timeLeft <= 900) { // 15 –º–∏–Ω—É—Ç
                    timerElement.classList.add('timer-warning');
                    timerElement.classList.remove('timer-critical');
                } else {
                    timerElement.classList.remove('timer-warning', 'timer-critical');
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç—ã –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
                if (timeLeft % 30 === 0) {
                    saveAnswers();
                }
                
                // –í—Ä–µ–º—è –≤—ã—à–ª–æ
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    isTimeUp = true;
                    showTimeUpMessage();
                }
            }, 1000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
        function showTimeUpMessage() {
            document.getElementById('time-up-message').style.display = 'flex';
        }

        // –ü–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        function getCompletionTime() {
            const endTime = Date.now();
            const timeSpentMs = endTime - startTime;
            const timeSpentSec = Math.floor(timeSpentMs / 1000);
            
            const hours = Math.floor(timeSpentSec / 3600);
            const minutes = Math.floor((timeSpentSec % 3600) / 60);
            const seconds = timeSpentSec % 60;
            
            if (hours > 0) {
                return `${hours}—á ${minutes}–º ${seconds}—Å`;
            } else if (minutes > 0) {
                return `${minutes}–º ${seconds}—Å`;
            } else {
                return `${seconds}—Å`;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ Google Forms
        function sendToGoogleForm(score, total, completionTime) {
            const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSe0LTMts3_qZ7x20OXlgFbSgYVk04fnDp_9tx5BKL2QkfGKQw/formResponse';
            
            console.log('üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ Google –§–æ—Ä–º—É...');
            console.log('–£—á–µ–Ω–∏–∫:', firstName, lastName, userClass + ' –∫–ª–∞—Å—Å');
            console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç:', `${score}/${total}`);
            console.log('–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:', completionTime);
            
            // –°–æ–∑–¥–∞–µ–º —Å–∫—Ä—ã—Ç—ã–π iframe –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            const iframeName = 'form-iframe-' + Date.now();
            const iframe = document.createElement('iframe');
            iframe.name = iframeName;
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            // –°–æ–∑–¥–∞–µ–º —Å–∫—Ä—ã—Ç—É—é —Ñ–æ—Ä–º—É
            const form = document.createElement('form');
            form.style.display = 'none';
            form.method = 'POST';
            form.action = GOOGLE_FORM_URL;
            form.target = iframeName;
            form.acceptCharset = 'UTF-8';
            
            // –ü–æ–ª—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            const fields = [
                { name: 'entry.1373641566', value: new Date().toLocaleDateString('ru-RU') }, // –î–∞—Ç–∞
                { name: 'entry.317459503', value: completionTime }, // –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–ò–ó–ú–ï–ù–ï–ù–û!)
                { name: 'entry.1109285225', value: firstName }, // –ò–º—è
                { name: 'entry.975925231', value: lastName }, // –§–∞–º–∏–ª–∏—è
                { name: 'entry.1311984471', value: `${score}/${total}` }, // –†–µ–∑—É–ª—å—Ç–∞—Ç
                { name: 'entry.1196822815', value: userClass + ' –∫–ª–∞—Å—Å' } // –ö–ª–∞—Å—Å (–î–û–ë–ê–í–õ–ï–ù–û!)
            ];
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –ø–æ–ª—è –≤ —Ñ–æ—Ä–º—É
            fields.forEach(field => {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = field.name;
                input.value = field.value;
                form.appendChild(input);
            });
            
            document.body.appendChild(form);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            const message = document.createElement('div');
            message.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #4CAF50;
                    color: white;
                    padding: 15px 25px;
                    border-radius: 10px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 10000;
                    animation: slideIn 0.3s ease;
                    max-width: 300px;
                ">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-check-circle" style="font-size: 20px;"></i>
                        <div>
                            <strong>–Ø—É–∞–ø—Ç–∞—Ä “ª–∞“°–ª–∞–Ω–¥—ã!</strong><br>
                            <small>–£“°—ã—Ç—ã—É—Å—ã “ª–µ“ô“ô–µ“£ –±–∞“ª–∞“ì—ã“ô“ô—ã –∫“Ø—Ä”ô—Å”ô–∫.</small>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(message);
            
            // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (message.parentNode) {
                    message.style.opacity = '0';
                    message.style.transition = 'opacity 0.5s';
                    setTimeout(() => {
                        if (message.parentNode) document.body.removeChild(message);
                    }, 500);
                }
            }, 4000);
            
            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É
            try {
                form.submit();
                console.log('‚úÖ –§–æ—Ä–º–∞ —É“£—ã—à–ª—ã –µ–±”ô—Ä–µ–ª–≥”ô–Ω!');
            } catch (error) {
                console.error('‚ùå –§–æ—Ä–º–∞ –µ–±”ô—Ä–µ“Ø“ô”ô —Ö–∞—Ç–∞:', error);
                
                // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±
                const trackerUrl = `${GOOGLE_FORM_URL}?` + fields.map(f => 
                    `${encodeURIComponent(f.name)}=${encodeURIComponent(f.value)}`
                ).join('&');
                
                const img = new Image();
                img.src = trackerUrl;
                img.style.display = 'none';
                document.body.appendChild(img);
                
                setTimeout(() => {
                    if (img.parentNode) document.body.removeChild(img);
                }, 1000);
            }
            
            // –û—á–∏—â–∞–µ–º DOM —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (form.parentNode) document.body.removeChild(form);
                if (iframe.parentNode) document.body.removeChild(iframe);
            }, 10000);
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
        function saveResultToBrowser(score, total, completionTime) {
            const userKey = `${firstName.toLowerCase()}_${lastName.toLowerCase()}_${userClass}`;
            const resultData = {
                firstName: firstName,
                lastName: lastName,
                class: userClass,
                score: score,
                total: total,
                timeSpent: completionTime,
                timestamp: new Date().getTime(),
                date: new Date().toLocaleDateString('ru-RU')
            };
            
            localStorage.setItem(`olymp_result_${userKey}`, JSON.stringify(resultData));
            // –£–¥–∞–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
            localStorage.removeItem(`olymp_answers_${firstName}_${lastName}_${userClass}`);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function showResult(score, total, completionTime) {
            const scoreElement = document.getElementById('score-text');
            const messageElement = document.getElementById('result-message');
            const timeElement = document.getElementById('time-result');
            const resultContainer = document.getElementById('result');
            
            scoreElement.textContent = `${score}/${total}`;
            
            const studentName = firstName ? `, ${firstName}` : '';
            let message = '';
            let gradient = '';
            
            if (score === total) {
                message = `üéâ –ò“´ –∫–∏—Ç–∫–µ—Å —à”ô–ø${studentName}! –ë”©—Ç”ô —è—É–∞–ø—Ç–∞—Ä “ô–∞ –¥”©—Ä”©“´! “∫–∏–Ω —ã—Å—ã–Ω —á–µ–º–ø–∏–æ–Ω! üèÜ`;
                gradient = 'linear-gradient(135deg, #4fc3f7, #00c853)';
            } else if (score >= total * 0.7) {
                message = `üëç –ë–∏–∫ —è“°—à—ã “ª”©“ô”©–º—Ç”ô${studentName}! –Ø“°—à—ã –±–∞—à“°–∞—Ä—ã–ø —Å—ã“°—Ç—ã“£!`;
                gradient = 'linear-gradient(135deg, #4fc3f7, #64dd17)';
            } else if (score >= total * 0.5) {
                message = `üòä –Ø“°—à—ã${studentName}! –ë–∞—à“°–∞—Ä–∞“ª—ã —ç—à—Ç”ô—Ä –±–∞–π—Ç–∞“°, ”ô–º–º”ô “ª–∏–Ω –¥”©—Ä”©“´ —é–ª–¥–∞!`;
                gradient = 'linear-gradient(135deg, #4fc3f7, #ffb300)';
            } else {
                message = `üí™ –£—Ä—Ç–∞—Å–∞${studentName}! –ú–∞—Ç–µ—Ä–∏–∞–ª–¥—ã “°–∞–±–∞—Ç–ª–∞—Ä“ì–∞ –∫”ô—Ä”ô–∫, ”ô–º–º”ô “ª–∏–Ω –¥”©—Ä”©“´ —é–ª–¥–∞!`;
                gradient = 'linear-gradient(135deg, #4fc3f7, #ff9100)';
            }
            
            messageElement.textContent = message;
            timeElement.innerHTML = `<i class="fas fa-clock"></i> –¢–∞–º–∞–º–ª–∞—É –≤–∞“°—ã—Ç—ã: <strong>${completionTime}</strong>`;
            document.querySelector('.score-circle').style.background = gradient;
            resultContainer.style.display = 'block';
            resultContainer.scrollIntoView({ behavior: 'smooth' });
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –µ—Å–ª–∏ –æ–Ω –µ—â–µ –∏–¥–µ—Ç
            if (timerInterval) {
                clearInterval(timerInterval);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –ø—Ä–∏ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –∏ –ø—Ä–∏ –∞–≤—Ç–æ-–æ—Ç–ø—Ä–∞–≤–∫–µ)
        function checkAnswersAndSubmit() {
            let score = 0;
            const totalQuestions = Object.keys(correctAnswers).length;
            const completionTime = getCompletionTime();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å
            for (let question in correctAnswers) {
                const selectedOption = document.querySelector(`input[name="${question}"]:checked`);
                
                if (selectedOption && selectedOption.value === correctAnswers[question]) {
                    score++;
                    selectedOption.parentElement.style.backgroundColor = '#e8f5e9';
                    selectedOption.parentElement.style.borderColor = '#4caf50';
                } else if (selectedOption) {
                    selectedOption.parentElement.style.backgroundColor = '#ffebee';
                    selectedOption.parentElement.style.borderColor = '#f44336';
                    
                    const correctOption = document.querySelector(`input[name="${question}"][value="${correctAnswers[question]}"]`);
                    if (correctOption) {
                        correctOption.parentElement.style.backgroundColor = '#e8f5e9';
                        correctOption.parentElement.style.borderColor = '#4caf50';
                    }
                } else {
                    // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –≤—ã–±—Ä–∞–Ω (–≤ —Ç.—á. –∫–æ–≥–¥–∞ –≤—Ä–µ–º—è –≤—ã—à–ª–æ)
                    selectedOption.parentElement.style.backgroundColor = '#ffebee';
                    selectedOption.parentElement.style.borderColor = '#f44336';
                    
                    const correctOption = document.querySelector(`input[name="${question}"][value="${correctAnswers[question]}"]`);
                    if (correctOption) {
                        correctOption.parentElement.style.backgroundColor = '#e8f5e9';
                        correctOption.parentElement.style.borderColor = '#4caf50';
                    }
                }
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            showResult(score, totalQuestions, completionTime);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            saveResultToBrowser(score, totalQuestions, completionTime);
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Google Forms
            sendToGoogleForm(score, totalQuestions, completionTime);
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –µ—Å–ª–∏ –æ–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ
            document.getElementById('time-up-message').style.display = 'none';
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('check-btn').addEventListener('click', function() {
            if (!isTimeUp) {
                clearInterval(timerInterval);
            }
            checkAnswersAndSubmit();
        });

        document.getElementById('auto-submit-btn').addEventListener('click', function() {
            checkAnswersAndSubmit();
        });

        document.getElementById('close-result').addEventListener('click', function() {
            document.getElementById('result').style.display = 'none';
        });

        document.querySelector('button[type="reset"]').addEventListener('click', function() {
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(option => {
                option.style.backgroundColor = '';
                option.style.borderColor = '';
            });
            document.getElementById('result').style.display = 'none';
            // –ù–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã - –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
        });

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', saveAnswers);
        });

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –≥–æ–¥
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
        window.addEventListener('load', function() {
            loadSavedAnswers();
            startTimer();
        });

        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
        if (!document.querySelector('#message-styles')) {
            const style = document.createElement('style');
            style.id = 'message-styles';
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
        }
    </script>
</body>

</html>



